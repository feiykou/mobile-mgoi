(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{255:function(t,e,n){"use strict";var r=n(3);e.a={getThemeDetail:function(t){if(!(t<=0))return r.a.fetchGet("theme/".concat(t,"/detail"))},getThemeList:function(t){return r.a.fetchGet("theme/list/".concat(t))},getThemeCate:function(t){return r.a.fetchGet("themeCate/sonCate/".concat(t))},getCateThumb:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return r.a.fetchGet("themeCate/crumb?id=".concat(t))}}},286:function(t,e,n){},287:function(t,e,n){},288:function(t,e,n){},334:function(t,e,n){"use strict";var r=n(286);n.n(r).a},335:function(t,e,n){"use strict";var r=n(287);n.n(r).a},336:function(t,e,n){"use strict";var r=n(288);n.n(r).a},353:function(t,e,n){"use strict";n.r(e);n(89),n(31);var r,o,c=n(5),l=n(106),m={props:{options:Object,to:String},data:function(){return{}}},d=(n(334),n(4)),h=Object(d.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.options?n("div",{staticClass:"lr-component"},[n("nuxt-link",{staticClass:"wrap",attrs:{to:t.to}},[n("van-image",{staticClass:"img",attrs:{fit:"cover","hover-class":"hover-class","lazy-load":"",src:t.options.main_img_url[0]}}),t._v(" "),n("div",{staticClass:"tit-desc"},[n("div",{staticClass:"tit font15 bold"},[t._v(t._s(t.options.name))]),t._v(" "),n("p",{staticClass:"desc"},[t._v(t._s(t.options.introduce))])])],1)],1):t._e()}),[],!1,null,"5cf5fbee",null).exports,v={props:{options:Object},data:function(){return{}},components:{LrItem:h}},f=(n(335),Object(d.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.options?n("div",{staticClass:"theme-list-component van-hairline--top"},[n("div",{staticClass:"tit font22 center bold"},[t._v(t._s(t.options.name))]),t._v(" "),n("p",{staticClass:"desc-txt"},[t._v(t._s(t.options.description))]),t._v(" "),n("van-image",{staticClass:"main-img",attrs:{fit:"cover","hover-class":"hover-class","lazy-load":"",src:t.options.mobile_imgs_url[0]}}),t._v(" "),n("div",{staticClass:"product-list-wrap"},t._l(t.options.product,(function(t,e){return n("lr-item",{key:e,staticClass:"list-item",attrs:{options:t,to:"/product/"+t.id}})})),1)],1):t._e()}),[],!1,null,"32ed6cc4",null).exports),_=n(257),C=n(255),D={layout:"main",watchQuery:["cate_id"],data:function(){return{cateData:null,productData:[],themeData:[],pLoading:!0,allData:null,thumbData:[]}},components:{mButton:l.a,TCateList:f,PageProductList:_.a},created:function(){var t=this.$route.query.cate_id;this.solveProduct(),this.getCateThumb(t)},validate:function(t){var e=t.query;return console.log(e),/^\d+$/.test(e.cate_id)},watch:{$route:function(t,e){if(console.log(e),console.log(t),e.query.cate_id&&e.query.cate_id!==t.query.cate_id){var n=t.query.cate_id;n&&(this.getCateThumb(n),this.solveProduct())}}},asyncData:(o=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,r,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isDev,e.route,e.store,e.env,e.params,n=e.query,e.req,e.res,e.redirect,r=e.error,o=n.cate_id,t.next=4,C.a.getThemeList(o);case 4:return c=t.sent,console.log(c),(!c||c.length<=0)&&r({statusCode:404,message:"页面加载失败，请重新加载"}),l={name:c.name,mobile_imgs_url:c.mobile_imgs_url,introduce:c.introduce},t.abrupt("return",{themeData:c.theme,cateData:l,allData:c});case 10:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)}),methods:{solveProduct:function(){var t=this.allData,e=[];if(t&&t.theme.length>0&&(t.theme.forEach((function(data){e=e.concat(data.product)})),e.length>0)){var n=[],r=[];e.forEach((function(t,e){-1==n.indexOf(t.id)&&(n.push(t.id),r.push(t))})),e=r}this.productData=e,this.pLoading=!1},getCateThumb:(r=Object(c.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.a.getCateThumb(e);case 2:this.thumbData=t.sent,console.log(this.thumbData);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}},y=(n(336),Object(d.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"theme-box theme-list-container"},[n("div",{staticClass:"head-tit font16 bold"},[t._v("唔该文创创意之"+t._s(t.cateData.name))]),t._v(" "),n("div",{staticClass:"crumb-head-title"},[n("thumb",{staticClass:"font14"},[n("thumb-item",[n("nuxt-link",{attrs:{to:"/"}},[t._v("首页")])],1),t._v(" "),t._l(t.thumbData,(function(e,r){return n("thumb-item",{key:r},[t.thumbData.length-1>r?n("nuxt-link",{attrs:{to:"/theme?id="+e.id}},[t._v(t._s(e.name))]):n("span",[t._v(t._s(e.name))])],1)}))],2)],1),t._v(" "),n("div",{staticClass:"theme-list-wrap"},[n("div",{staticClass:"section van-hairline--bottom"},[n("div",{staticClass:"head-img"},[n("van-image",{staticClass:"img",attrs:{fit:"cover",src:t.cateData.mobile_imgs_url[0]}})],1),t._v(" "),n("p",{staticClass:"desc-txt"},[t._v("\n        "+t._s(t.cateData.introduce)+"\n      ")])]),t._v(" "),t._l(t.themeData,(function(t,e){return n("div",{key:e},[n("TCateList",{attrs:{options:t}})],1)})),t._v(" "),n("PageProductList",{staticClass:"product-list-wrap",attrs:{productsData:t.productData,loading:t.pLoading}})],2),t._v(" "),n("cate-list")],1)}),[],!1,null,"3b7e0f65",null));e.default=y.exports}}]);